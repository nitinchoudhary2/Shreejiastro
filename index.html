<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡§∂‡•ç‡§∞‡•Ä‡§ú‡•Ä ‡§è‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã | Shreeji Astro - Live Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">

    <style>
        /* --- ‡§•‡•Ä‡§Æ ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏ (Spiritual & Dark) --- */
        :root {
            --gold: #FFD700;
            --saffron: #ff9933;
            --glass-bg: rgba(30, 10, 10, 0.85);
            --chat-sent: rgba(255, 140, 0, 0.7);
            --chat-received: rgba(255, 255, 255, 0.1);
            --text-color: #fff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Poppins', sans-serif;
            /* ‡§ó‡§π‡§∞‡§æ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° */
            background: radial-gradient(circle at center, #5c1a05 0%, #2c0404 60%, #000000 100%);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
        }

        /* --- 1. ‡§π‡•ã‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® --- */
        #home-screen {
            height: 100%; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            position: relative; padding: 20px;
        }

        h1 {
            font-family: 'Cinzel Decorative', cursive; font-size: 3rem;
            color: var(--gold); text-shadow: 0 0 20px rgba(255, 215, 0, 0.6);
            margin-bottom: 5px;
        }

        .mantra { font-size: 1.4rem; color: #ffbd69; font-weight: bold; margin-bottom: 30px; }

        /* ‡§∂‡•ç‡§∞‡•Ä ‡§ï‡•É‡§∑‡•ç‡§£ ‡§á‡§Æ‡•á‡§ú ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ */
        .center-icon-container {
            width: 200px; height: 200px;
            border: 3px double var(--gold); 
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 40px rgba(255, 165, 0, 0.3);
            background: rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        /* ‡§∂‡•ç‡§∞‡•Ä ‡§ï‡•É‡§∑‡•ç‡§£/‡§Æ‡•ã‡§∞‡§™‡§Ç‡§ñ ‡§á‡§Æ‡•á‡§ú */
        .krishna-img {
            width: 110%; height: 110%; object-fit: cover;
            animation: floatImg 4s ease-in-out infinite;
        }

        .main-btn {
            margin-top: 50px; padding: 15px 45px; font-size: 1.1rem;
            background: linear-gradient(45deg, #FFD700, #ff8c00);
            border: none; border-radius: 50px; color: #2c0404; font-weight: 600;
            cursor: pointer; box-shadow: 0 8px 20px rgba(255, 140, 0, 0.3);
            transition: all 0.3s ease;
        }
        .main-btn:hover { transform: scale(1.05); }

        /* --- 2. ‡§ö‡•à‡§ü ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® --- */
        #chat-screen { display: none; height: 100%; flex-direction: column; }

        .chat-header {
            background: var(--glass-bg); padding: 15px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            display: flex; justify-content: space-between; align-items: center;
        }

        .chat-area {
            flex: 1; padding: 20px; overflow-y: auto;
            display: flex; flex-direction: column; gap: 15px;
            background: rgba(0,0,0,0.2);
        }

        .message {
            max-width: 80%; padding: 12px 18px; border-radius: 15px;
            font-size: 0.95rem; position: relative; word-wrap: break-word;
        }
        .bot-msg { align-self: flex-start; background: var(--chat-received); border: 1px solid rgba(255, 215, 0, 0.2); }
        .user-msg { align-self: flex-end; background: var(--chat-sent); color: #fff; }

        .msg-img {
            max-width: 100%; border-radius: 10px; margin-top: 5px; border: 2px solid #fff;
        }

        .chat-input-area {
            padding: 15px; background: var(--glass-bg);
            display: flex; gap: 10px; align-items: center;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        #msgInput {
            flex: 1; padding: 12px 15px; border-radius: 25px;
            background: rgba(255,255,255,0.1); border: 1px solid #555; color: white;
        }

        /* ‡§´‡§æ‡§á‡§≤ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§¨‡§ü‡§® */
        .file-btn-label {
            background: #444; color: white; padding: 10px; border-radius: 50%;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            width: 45px; height: 45px; border: 1px solid #777;
        }
        .send-btn {
            background: var(--gold); border: none; width: 45px; height: 45px;
            border-radius: 50%; cursor: pointer; font-weight: bold; color: #2c0404;
        }

        /* --- 3. ‡§è‡§°‡§Æ‡§ø‡§® ‡§™‡•à‡§®‡§≤ --- */
        #admin-screen { display: none; height: 100%; flex-direction: column; background: #1a0505; }
        .admin-header { padding: 20px; border-bottom: 1px solid var(--gold); display: flex; justify-content: space-between; }
        
        /* ‡§è‡§°‡§Æ‡§ø‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≠‡•Ä ‡§ö‡•à‡§ü ‡§ú‡•à‡§∏‡§æ ‡§µ‡•ç‡§Ø‡•Ç */
        .admin-chat-view { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        
        .admin-input-area { padding: 20px; background: #220a0a; display: flex; gap: 10px; }

        /* --- ‡§≤‡•â‡§ó‡§ø‡§® ‡§Æ‡•â‡§°‡§≤ --- */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center;
        }
        .login-box { background: #2d1b4e; padding: 30px; border: 1px solid var(--gold); border-radius: 15px; text-align: center; }
        input[type="password"] { padding: 10px; margin: 10px 0; width: 100%; border-radius: 5px; }

        /* ‡§ó‡•Å‡§™‡•ç‡§§ ‡§¨‡§ü‡§® */
        .secret-btn { position: fixed; top: 10px; left: 10px; opacity: 0.1; color: gold; cursor: pointer; }

        @keyframes floatImg { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

    </style>
</head>
<body>

    <div id="home-screen">
        <div class="secret-btn" onclick="openAdminLogin()">Admin</div>
        
        <h1>‡§∂‡•ç‡§∞‡•Ä‡§ú‡•Ä ‡§è‡§∏‡•ç‡§ü‡•ç‡§∞‡•ã</h1>
        <p class="mantra">|| ‡§∞‡§æ‡§ß‡•á ‡§∞‡§æ‡§ß‡•á ||</p>
        
        <div class="center-icon-container">
            <img src="https://i.pinimg.com/originals/7c/1b/2a/7c1b2a61696170865664746849564e49.jpg" 
                 alt="Shree Krishna Morpankh" 
                 class="krishna-img"
                 onerror="this.src='https://cdn-icons-png.flaticon.com/512/3659/3659932.png'"> 
        </div>

        <p style="margin-top: 40px; color: #ddd;">‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§≠‡•á‡§ú‡•á‡§Ç, ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§™‡§æ‡§è‡§Ç (‡§´‡•ã‡§ü‡•ã ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß)</p>
        
        <button class="main-btn" onclick="enterAsCustomer()">‡§ö‡•à‡§ü ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
    </div>

    <div id="login-modal" class="modal">
        <div class="login-box">
            <h3 style="color:var(--gold);">Admin Login</h3>
            <input type="password" id="adminPass" placeholder="Password">
            <button class="main-btn" style="margin-top:10px; padding:10px 30px;" onclick="checkLogin()">Login</button>
            <br><button onclick="closeModal()" style="background:none; border:none; color:#aaa; margin-top:10px; cursor:pointer;">Cancel</button>
        </div>
    </div>

    <div id="chat-screen">
        <div class="chat-header">
            <div style="display:flex; align-items:center; gap:10px;">
                <img src="https://cdn-icons-png.flaticon.com/512/11060/11060767.png" width="40" style="border-radius:50%; background:white;">
                <div>
                    <h3 style="margin:0; color:var(--gold);">‡§∂‡•ç‡§∞‡•Ä‡§ú‡•Ä ‡§Æ‡§π‡§æ‡§∞‡§æ‡§ú</h3>
                    <span style="font-size:0.8rem; color:lightgreen;">‚óè Online</span>
                </div>
            </div>
            <button onclick="logout()" style="background:transparent; border:1px solid red; color:red; padding:5px 10px; border-radius:15px; cursor:pointer;">Exit</button>
        </div>
        
        <div id="customer-chat-area" class="chat-area"></div>
        
        <div class="chat-input-area">
            <label for="fileInput" class="file-btn-label">üìé</label>
            <input type="file" id="fileInput" accept="image/*" style="display:none;" onchange="handleFileSelect()">
            
            <input type="text" id="msgInput" placeholder="‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç..." onkeypress="handleEnter(event)">
            <button class="send-btn" onclick="sendCustomerMessage()">‚û§</button>
        </div>
    </div>

    <div id="admin-screen">
        <div class="admin-header">
            <h2 style="color:var(--gold);">Live Admin Panel</h2>
            <button onclick="clearChat()">Clear Chat</button>
            <button onclick="logout()">Logout</button>
        </div>
        <div id="admin-chat-area" class="admin-chat-view">
            <p style="text-align:center; color:gray;">‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞ ‡§ï‡•á ‡§Æ‡•à‡§∏‡•á‡§ú ‡§ï‡§æ ‡§á‡§Ç‡§§‡§ú‡§º‡§æ‡§∞...</p>
        </div>
        <div class="admin-input-area">
            <input type="text" id="adminInput" placeholder="Reply as Guruji..." style="flex:1; padding:10px; border-radius:5px;">
            <button onclick="sendAdminReply()" style="padding:10px 20px; background:var(--gold); border:none; font-weight:bold; cursor:pointer;">Reply</button>
        </div>
    </div>

    <script>
        const STORAGE_KEY = 'shreeji_chat_history';
        let userType = 'guest'; // 'guest' or 'admin'
        let pendingImage = null; // ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§´‡•ã‡§ü‡•ã

        // --- Initialization ---
        window.onload = function() {
            syncChat(); // ‡§™‡•á‡§ú ‡§≤‡•ã‡§° ‡§π‡•ã‡§§‡•á ‡§π‡•Ä ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§ö‡•à‡§ü ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
            
            // ‡§Ö‡§ó‡§∞ ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§ü‡•à‡§¨ ‡§Æ‡•á‡§Ç ‡§ï‡•Å‡§õ ‡§¨‡§¶‡§≤‡§æ, ‡§§‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
            window.addEventListener('storage', function(e) {
                if (e.key === STORAGE_KEY) {
                    syncChat();
                }
            });
        };

        function showScreen(id) {
            document.querySelectorAll('div[id$="-screen"]').forEach(d => d.style.display = 'none');
            document.getElementById(id).style.display = 'flex'; // Chat screens are flex
            if(id === 'home-screen') document.getElementById(id).style.display = 'flex';
        }

        // --- ‡§≤‡•â‡§ó‡§ø‡§®/‡§®‡•á‡§µ‡§ø‡§ó‡•á‡§∂‡§® ---
        function enterAsCustomer() {
            userType = 'customer';
            showScreen('chat-screen');
            syncChat();
        }

        function openAdminLogin() { document.getElementById('login-modal').style.display = 'flex'; }
        function closeModal() { document.getElementById('login-modal').style.display = 'none'; }

        function checkLogin() {
            const p = document.getElementById('adminPass').value;
            if(p === "Choudhary9462&") {
                userType = 'admin';
                closeModal();
                showScreen('admin-screen');
                syncChat();
            } else {
                alert("‡§ó‡§≤‡§§ ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°");
            }
        }

        function logout() {
            userType = 'guest';
            showScreen('home-screen');
        }

        function clearChat() {
            if(confirm("‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§∏‡§æ‡§∞‡•Ä ‡§ö‡•à‡§ü ‡§Æ‡§ø‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) {
                localStorage.removeItem(STORAGE_KEY);
                syncChat();
            }
        }

        // --- ‡§Æ‡•à‡§∏‡•á‡§ú ‡§≠‡•á‡§ú‡§®‡§æ (‡§ï‡§∏‡•ç‡§ü‡§Æ‡§∞) ---
        function handleEnter(e) { if(e.key === 'Enter') sendCustomerMessage(); }

        function handleFileSelect() {
            const file = document.getElementById('fileInput').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    pendingImage = e.target.result; // Base64 ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ø‡§Ç‡§ó
                    document.getElementById('msgInput').placeholder = "‡§´‡•ã‡§ü‡•ã ‡§ö‡§Ø‡§®‡§ø‡§§ (Enter ‡§¶‡§¨‡§æ‡§è‡§Ç ‡§Ø‡§æ ‡§≠‡•á‡§ú‡•á‡§Ç)";
                    document.getElementById('msgInput').focus();
                };
                reader.readAsDataURL(file);
            }
        }

        function sendCustomerMessage() {
            const text = document.getElementById('msgInput').value.trim();
            
            if (!text && !pendingImage) return; // ‡§ñ‡§æ‡§≤‡•Ä ‡§Æ‡•à‡§∏‡•á‡§ú ‡§® ‡§≠‡•á‡§ú‡•á‡§Ç

            const msgData = {
                sender: 'user',
                text: text,
                image: pendingImage,
                time: new Date().toLocaleTimeString()
            };

            saveMessage(msgData);
            
            // Reset Inputs
            document.getElementById('msgInput').value = '';
            document.getElementById('msgInput').placeholder = "‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§≤‡§ø‡§ñ‡•á‡§Ç...";
            document.getElementById('fileInput').value = '';
            pendingImage = null;
        }

        // --- ‡§Æ‡•à‡§∏‡•á‡§ú ‡§≠‡•á‡§ú‡§®‡§æ (‡§è‡§°‡§Æ‡§ø‡§®) ---
        function sendAdminReply() {
            const text = document.getElementById('adminInput').value.trim();
            if(!text) return;

            const msgData = {
                sender: 'admin',
                text: text,
                image: null,
                time: new Date().toLocaleTimeString()
            };

            saveMessage(msgData);
            document.getElementById('adminInput').value = '';
        }

        // --- ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§î‡§∞ ‡§≤‡•ã‡§° (The Brain) ---
        function saveMessage(msgObj) {
            let history = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
            history.push(msgObj);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(history));
            syncChat();
        }

        function syncChat() {
            const history = JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
            
            const customerArea = document.getElementById('customer-chat-area');
            const adminArea = document.getElementById('admin-chat-area');

            // HTML ‡§¨‡§®‡§æ‡§®‡§æ
            let html = '';
            history.forEach(msg => {
                const isUser = msg.sender === 'user';
                const alignClass = isUser ? (userType === 'customer' ? 'user-msg' : 'bot-msg') : (userType === 'customer' ? 'bot-msg' : 'user-msg');
                const name = isUser ? "‡§≠‡§ï‡•ç‡§§" : "‡§ó‡•Å‡§∞‡•Å‡§ú‡•Ä";
                
                let imgHtml = msg.image ? `<br><img src="${msg.image}" class="msg-img">` : '';

                html += `
                    <div class="message ${isUser ? 'user-msg' : 'bot-msg'}" style="align-self: ${isUser ? 'flex-end' : 'flex-start'}; background: ${isUser ? 'var(--chat-sent)' : 'var(--chat-received)'}">
                        <small style="color:#aaa; font-size:0.7rem;">${name} ‚Ä¢ ${msg.time}</small><br>
                        ${msg.text}
                        ${imgHtml}
                    </div>
                `;
            });

            // ‡§Ö‡§ó‡§∞ ‡§è‡§°‡§Æ‡§ø‡§® ‡§π‡•à ‡§§‡•ã ‡§â‡§∏‡•á ‡§≠‡•Ä ‡§Ø‡§π‡•Ä ‡§¶‡§ø‡§ñ‡•á, ‡§¨‡§∏ ‡§è‡§≤‡§æ‡§á‡§®‡§Æ‡•á‡§Ç‡§ü ‡§Ö‡§≤‡§ó ‡§π‡•ã ‡§∏‡§ï‡§§‡§æ ‡§π‡•à
            // ‡§∏‡§∞‡§≤‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡§Æ ‡§è‡§°‡§Æ‡§ø‡§® ‡§î‡§∞ ‡§Ø‡•Ç‡§ú‡§∞ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§è‡§ï ‡§π‡•Ä ‡§∏‡•ç‡§ü‡•ç‡§∞‡§ï‡•ç‡§ö‡§∞ ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç‡§ó‡•á, ‡§¨‡§∏ ‡§®‡§æ‡§Æ ‡§ä‡§™‡§∞ ‡§≤‡§ø‡§ñ‡§æ ‡§π‡•à
            
            let customerHtml = '';
            let adminHtml = '';

            history.forEach(msg => {
                // Customer View
                let cClass = msg.sender === 'user' ? 'user-msg' : 'bot-msg';
                let cImg = msg.image ? `<img src="${msg.image}" class="msg-img">` : '';
                customerHtml += `<div class="message ${cClass}">${msg.text} ${cImg}</div>`;

                // Admin View
                let aClass = msg.sender === 'admin' ? 'user-msg' : 'bot-msg'; // Admin ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ñ‡•Å‡§¶ ‡§ï‡§æ ‡§Æ‡•à‡§∏‡•á‡§ú user-msg ‡§ú‡•à‡§∏‡§æ ‡§¶‡§ø‡§ñ‡•á
                let aName = msg.sender === 'user' ? '<strong style="color:orange">‡§≠‡§ï‡•ç‡§§:</strong> ' : '<strong style="color:lightgreen">‡§Ü‡§™:</strong> ';
                let aImg = msg.image ? `<br><img src="${msg.image}" class="msg-img" style="max-width:200px;">` : '';
                
                adminHtml += `<div class="message ${aClass}" style="width:100%; max-width:100%; background: ${msg.sender === 'user' ? '#331111' : '#112211'}">
                                ${aName} ${msg.text} ${aImg}
                              </div>`;
            });

            if(customerArea) customerArea.innerHTML = customerHtml;
            if(adminArea) adminArea.innerHTML = adminHtml;

            // Scroll to bottom
            if(customerArea) customerArea.scrollTop = customerArea.scrollHeight;
            if(adminArea) adminArea.scrollTop = adminArea.scrollHeight;
        }

    </script>
</body>
</html>
